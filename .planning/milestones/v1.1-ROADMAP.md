# Milestone v1.1: Heartbeat & Proactive Agent — Archived Roadmap

**Goal:** Make the bot proactive with periodic check-ins and scheduled tasks.
**Status:** Complete
**Started:** 2026-02-12
**Completed:** 2026-02-12

## Stats

- **Phases:** 6 (Phase 6-11)
- **Requirements:** 24/24 delivered
- **Commits:** 16
- **LOC added:** ~1,500 (relay.ts grew from ~1,080 to 2,501 lines)
- **Files changed:** 6 core files
- **Dependencies added:** croner ^10.0.1

## Key Accomplishments

1. **Heartbeat system** — Periodic agent loop with HEARTBEAT.md checklist, HEARTBEAT_OK suppression, 24h deduplication, active hours gating, and dedicated Telegram topic thread
2. **Cron engine** — Tick-based scheduler supporting 3 schedule types (5-field cron, interval, one-shot) with Claude execution and thread-targeted delivery
3. **Cron management** — Full CRUD via `/cron` Telegram commands + declarative HEARTBEAT.md file sync
4. **Agent self-scheduling** — `[CRON: schedule | prompt]` intent tag lets Claude autonomously create reminders and follow-up tasks
5. **Schema infrastructure** — Supabase tables (cron_jobs, heartbeat_config) with 3 migrations

## Phase Details

| Phase | Goal | Requirements | Status |
|-------|------|--------------|--------|
| 6 - Schema & Infrastructure | Database foundation for heartbeat and cron | INFRA-01, INFRA-02, INFRA-03, INFRA-04 | Done |
| 7 - Heartbeat Core | Periodic agent loop with smart suppression | HB-01, HB-02, HB-03, HB-06 | Done |
| 8 - Heartbeat Refinement | Active hours, dedicated thread, config | HB-04, HB-05, HB-07 | Done |
| 9 - Cron Engine | Scheduled job execution system | CRON-01, CRON-02, CRON-03, CRON-04, CRON-05, CRON-06 | Done |
| 10 - Cron Management | User-facing controls via Telegram and files | CMGMT-01, CMGMT-02, CMGMT-03, CMGMT-04 | Done |
| 11 - Agent Scheduling | Claude creates its own reminders | AGENT-01, AGENT-02, AGENT-03 | Done |

## Dependencies Graph

```
Phase 6 (Schema)
  |-> Phase 7 (Heartbeat Core)
  |     |-> Phase 8 (Heartbeat Refinement)
  |-> Phase 9 (Cron Engine)
        |-> Phase 10 (Cron Management)
        |-> Phase 11 (Agent Scheduling)
```

## Audit

- Audit status: PASSED (24/24 requirements verified)
- Audit file: `.planning/v1.1-MILESTONE-AUDIT.md`
- No gaps found
- No tech debt noted

---

*Archived: 2026-02-12*
