# Requirements: Milestone v1.1 â€” Archived

**Defined:** 2026-02-12
**Completed:** 2026-02-12
**Core Value:** Proactive agent that checks in and schedules tasks without waiting for user input

## v1.1 Requirements (All Complete)

### Heartbeat

- [x] **HB-01**: Bot runs a periodic heartbeat loop at configurable interval (default 1h)
- [x] **HB-02**: Heartbeat reads HEARTBEAT.md file from workspace as checklist for what to check
- [x] **HB-03**: Bot detects HEARTBEAT_OK token in Claude response and suppresses message delivery
- [x] **HB-04**: Heartbeat respects active hours window (configurable start/end time + timezone, default 08:00-22:00)
- [x] **HB-05**: Heartbeat messages are delivered to a dedicated "Heartbeat" topic thread in the Telegram group
- [x] **HB-06**: Identical heartbeat messages are deduplicated within a 24-hour window
- [x] **HB-07**: Heartbeat configuration (interval, active hours, enabled/disabled) is stored in Supabase

### Cron Scheduler

- [x] **CRON-01**: Cron jobs are stored in a new `cron_jobs` Supabase table
- [x] **CRON-02**: User can create cron jobs with 5-field cron expressions via croner library
- [x] **CRON-03**: User can create one-shot timer jobs (e.g., "in 20 minutes")
- [x] **CRON-04**: User can create fixed-interval jobs (e.g., "every 2 hours")
- [x] **CRON-05**: Cron job execution spawns a Claude call with the job's prompt in the job's target thread context
- [x] **CRON-06**: Cron job results are delivered to the job's target thread (or DM if no thread specified)

### Cron Management

- [x] **CMGMT-01**: User can add cron jobs via `/cron add <schedule> <prompt>` Telegram command
- [x] **CMGMT-02**: User can list active cron jobs via `/cron list` Telegram command
- [x] **CMGMT-03**: User can remove cron jobs via `/cron remove <id>` Telegram command
- [x] **CMGMT-04**: User can configure heartbeat/cron via HEARTBEAT.md file (read on each heartbeat cycle)

### Agent Self-Scheduling

- [x] **AGENT-01**: Claude can create cron jobs via `[CRON: <schedule> | <prompt>]` intent tag in responses
- [x] **AGENT-02**: Agent-created jobs are stored in Supabase identically to user-created jobs (with source=agent marker)
- [x] **AGENT-03**: Claude receives instructions in its system prompt about the [CRON:] intent capability

### Schema & Infrastructure

- [x] **INFRA-01**: New `cron_jobs` Supabase table with migration SQL
- [x] **INFRA-02**: New `heartbeat_config` row/table in Supabase for heartbeat settings
- [x] **INFRA-03**: Heartbeat and cron events logged in logs_v2 table
- [x] **INFRA-04**: Heartbeat timer integrates with existing relay lifecycle (starts on boot, stops on shutdown)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 6 | Complete |
| INFRA-02 | Phase 6 | Complete |
| INFRA-03 | Phase 6 | Complete |
| INFRA-04 | Phase 6 | Complete |
| HB-01 | Phase 7 | Complete |
| HB-02 | Phase 7 | Complete |
| HB-03 | Phase 7 | Complete |
| HB-06 | Phase 7 | Complete |
| HB-04 | Phase 8 | Complete |
| HB-05 | Phase 8 | Complete |
| HB-07 | Phase 8 | Complete |
| CRON-01 | Phase 9 | Complete |
| CRON-02 | Phase 9 | Complete |
| CRON-03 | Phase 9 | Complete |
| CRON-04 | Phase 9 | Complete |
| CRON-05 | Phase 9 | Complete |
| CRON-06 | Phase 9 | Complete |
| CMGMT-01 | Phase 10 | Complete |
| CMGMT-02 | Phase 10 | Complete |
| CMGMT-03 | Phase 10 | Complete |
| CMGMT-04 | Phase 10 | Complete |
| AGENT-01 | Phase 11 | Complete |
| AGENT-02 | Phase 11 | Complete |
| AGENT-03 | Phase 11 | Complete |

**Coverage:** 24/24 (100%)

## Deferred to v2

- **AUTO-01**: Webhook-triggered heartbeats
- **AUTO-02**: Cron job chaining
- **AUTO-03**: Cron job templates
- **MON-01**: Heartbeat health dashboard
- **MON-02**: Cron job execution history

---

*Archived: 2026-02-12*
